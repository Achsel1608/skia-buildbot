<!--
  The common.js file must be included before this file.

  This in an HTML Import-able file that contains the definition
  of the following elements:

    <fuzzer-info-sk>

  This element will query /json/details for all of the detailed fuzz reports of a given file (passed in by query params) and displayed.
  This may be further scoped by function, line number and fuzz-type (either binary or api)

  To use this file import it:

    <link href="/res/imp/fuzzer-info-sk.html" rel="import" />

  Usage:

    <fuzzer-info-sk></fuzzer-info-sk>

  Properties:
    None.

  Methods:
    None.

  Events:
    None.
-->
<link rel="import" href="/res/imp/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/res/imp/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="fuzzer-collapse-file-sk.html">
<dom-module id="fuzzer-info-sk">
  <template>
  <iron-ajax auto url="/json/details"
      handle-as="json"
      params="{{_urlParams}}"
      last-response="{{fileDetails}}">
    </iron-ajax>
      <fuzzer-collapse-file-sk file="{{fileDetails}}" category="{{category}}" expand></fuzzer-collapse-file-sk>
  </template>

  <script>
    Polymer({
      is: 'fuzzer-info-sk',

      properties: {
        fileDetails: {
          type: Array,
          value: function() {
            return [];
          },
        },
        category: {
          type: String,
          value: "",
        },
        _urlParams: {
          type: String,
          computed: "_getURLParams(category)",
        }
      },
      _getURLParams: function(category) {
        return {
          "category": category,
          "file": fuzzer.paramFromPath("file"),
          "func": fuzzer.paramFromPath("func"),
          "line": fuzzer.paramFromPath("line"),
          "name": fuzzer.paramFromPath("name"),
        };
      }
    });
  </script>
</dom-module>