<!-- The <debugger-app-sk> custom element declaration.

The main application element for the Skia Debugger.

  Attributes:
    None.

  Events:
    None.

  Methods:
    None.

-->
<link rel=import href="/res/imp/bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel=import href="/res/imp/bower_components/paper-header-panel/paper-header-panel.html">
<link rel=import href="/res/imp/bower_components/paper-icon-button/paper-icon-button.html">
<link rel=import href="/res/imp/bower_components/paper-toolbar/paper-toolbar.html">
<link rel=import href="/res/imp/bower_components/iron-icons/iron-icons.html">
<link rel=import href="/res/imp/bower_components/iron-icon/iron-icon.html">

<link rel=import href="/res/common/imp/9/error-toast-sk.html">
<dom-module id="debugger-app-sk">
  <style type="text/css" media="screen">
    :root {
      --paper-toolbar-background: #1f78b4;
    }

    :host {
      display: block;
      height: 100%
    }

    #content {
      margin: 1em;
    }
  </style>
  <template>
    <paper-header-panel>
      <paper-toolbar>
        <div>Skia Debugger</div>
      </paper-toolbar>
      <div id=content>
        <p> This is the app!  </p>
        <h2>XHR Results:</h2>
        <button on-tap="_get">Test XHR</button>
        <pre id=results></pre>
        <img id=img src="">
        <h2>Upload an SKP here.</h2>
        <form enctype="multipart/form-data" method="post" action="/new" name="fileinfo">
          <label>SKP to send:</label>
          <input type="file" name="file" required />
          <input type="submit" value="Upload" />
        </form>
        <error-toast-sk></error-toast-sk>
      </div>
    </paper-header-panel>
  </template>
</dom-module>

<script>
  Polymer({
    is: "debugger-app-sk",

    ready: function() {
      // Load the test image served by the debugger.
      this.$.img.src = window.location.origin + "/img";window.location.origin + "/img";
    },

    _get: function() {
      this.$.results.textContent = "Running...";
      sk.get("/_/info").then(JSON.parse).then(function(json) {
        this.$.results.textContent = JSON.stringify(json, 2);
      }.bind(this)).catch(sk.errorMessage);
    },
  });
</script>
